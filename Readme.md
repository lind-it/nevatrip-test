<a href="#example-2.1"><h4>Объяснение задания 2.1</h4></a>
<a href="#example-2.1"><h4>Объяснение задания 2.2</h4></a>

<a href="#routes"> Маршрутизация </a><br>
<a href="#controllers"> Контроллеры </a><br>
<a href="#controllers-methods"> Методы контроллеров </a><br>
<a href="#models"> Модели </a><br>
<a href="#models-methods"> Методы моделей </a><br>
<a href="#db-dump"> Дамп базы данных </a><br>

<hr> 

<h1 id="routes">Маршрутизация</h1>

Все запросы проходят через файл index.php

Маршруты запросов определяются в файле `routes/web.php`. Для определения маршрутов используется 
класс `App\Services\Router`, находящийся в папке `app/services/Router.php`

Метод `Router::route(string $method, string $url, array $action)`, определяет маршрут запроса и 
принимает 3 аргумента:

`string $method` - метод запроса (GET, POST, и т.д)
`string $url` - маршрут запроса
`array $action` - принимает массив из двух элементов: полное имя класса контроллера и название метода, 
который будет вызван, когда запрос пойдет по этому маршруту

<hr> 

<h1 id="controllers">Контроллеры</h1>

В папке `app/controllers` находятся контроллеры, которые обрабатывают запрос
Каждый создаваемый контроллер должен быт в пространстве имен `App\Controllers`
и наследоваться от класса `App\Controllers\Controller`

<h2 id="controllers-methods"> Методы контроллеров </h2>

`Controller->view(string $view)` - подключает файл, находяшийся по пути `/static/view/`, содержит 1 аргумент:
`string $view` - название файла, без расширения (ВАЖНО! файл должен иметь расширение .php)

`MainController->index()` - вызвает `Controller->view('index')` т.е подключает файл index.php

`FakeApiController->approve()` - выдает рандомный массив, из коллекции массивов, находящихся в самом контроллере,
выдает либо успешное подтверждение закааз, либо ошибку

`FakeApiController->book()` - выдает рандомный массив, из коллекции массивов, находящихся в самом контроллере,
выдает либо успешную бронь, либо ошибку

`OrderController->createOrder()` - подключается к базе данных передает подключение в модель `Order`,
получает данные из POST-запроса, после чего делает два запроса к `api.site.com` через метод `Order::request()`
и создает запись в базе данных в таблице `orders`

`TicketController->createTicket($order_id, $type_name, $price)` - подключается к базе данных передает подключение в модель `Ticket`,
делает запрос на создание запись в таблице `tickets`, имеет 3 аргумента:

`$order_id` - идентификатор запроса, к которому привазан билет
`$type_name` - название типа билетов, которое хранится в таблице `tickets_type` 
`$price` - цена билета

`TicketsTypeController->getTypeId(string $ticketTypeName)` - подключается к базе данных передает подключение в модель `TikectsType`,
делает запрос на получение `id` типо билета, в соответствии с передаваемым значением,
имеет 1 аргумент:

`string $ticketTypeName` - имя типа билета

<hr> 

<h1 id="models">Модели</h1>

В папке `app/models` находятся модели, которые представляют собой объект соответсвующий таблице в базе данных
Каждыя создаваемая модель должна быть в пространстве имен `App\Models`
и наследоваться от класса `App\Models\Model`

<h2 id="models-methods"> Методы моделей </h2>

`Model::setConnect(PDO $connect)` - устанавливает соединение с базой данных, имеет 1 аргумент:

`PDO $connect` - объект PDO, являющийся подключением к базе данных

`Model::query(string $query, array $data)` - выполняет подготовленный запрос к базе данных, имеет 2 аргумента:

`string $query` - сам запрос
`array $data` - ассоциативный массив, в котором находятся данные, передаваемые в подготовленный запрос

`Order::generateBarcode()` - генерирует случает набор чисел для поля `barcode` таблицы `orders` 

`Order::request(string $url, $data, string $type)` - делает POST-запрос через библеотеку curl, имеет 3 аргумента:

`string $url` - адресс, куда будет идти запрос
`$data` - данные, передаваемые в этом запросе
`string $type` - тип запроса, которы сверается с переменной `$requestType`, находящейся в самом методе

`Ticket::generateBarcode()` - генерирует случает набор чисел для поля `barcode` таблицы `tickets`

<hr> 

<h1 id="db-dump">Дамп базы данных</h1>

Дамп находится в папке `/sql/nevatrip.sql`

<hr> 

<h1 id="example-2.1">Объяснение задания 2.1</h1>

Сделал отдельную таблицу `tickets_type`, где хранятся все типы билетов. В случае, если потребуется добавить еще типы,
их можно просто добавить в таблицу, без необходимости менять таблицу `orders`

<h1 id="example-2.2">Объяснение задания 2.2</h1>

Сделал отдельную таблицу `ticktes`, в которую будут сохранятся баркоды, а также цена и тип билета(детский, льготный, и т.д),
при этом цена и количесвто билетов больше не хранятся в таблице `orders`, а получить количество билетов разных типов можно черз sql-запрос,
используюя функцию sql COUNT()

